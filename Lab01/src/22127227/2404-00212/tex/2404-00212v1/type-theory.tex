\section{A type theory for cost-sensitive synthetic domain theory}\label{sec:type-theory}

We work in an extensional dependent type theory combining synthetic domain theory with the intension-extension phase distinction of Niu~\etal~\cite{niu-sterling-grodin-harper:2022}; the semantics and model construction of this theory is developed in \cref{sec:predomains} and \cref{sec:model}. Here we outline the language furnished by this combination. Following Niu~\etal~\cite{niu-sterling-grodin-harper:2022}, we assume an indeterminate proposition $\phase{}$ representing the phase distinction. We assume a (reflective) subuniverse of predomains $\mathcal{U}_\kw{predom}$. Every predomain is equipped with a \emph{synthetic} $\omega$-complete partial order structure, which we explain in \cref{subsec:synth-omega-cpo}. The significance of {synthetic} $\omega$-completeness is that they can be used to construct the join of \emph{rational chains} ($\Nat$-chains arising from the iterates of an endomap), the critical component in the interpretation of fixed-points in both classical and synthetic domain theory. 

By a \emph{domain} we shall mean a predomain $X$ equipped with a least element. Equivalently this may be characterized as an algebra for the \emph{lifting monad} $\mathbb{L} = (\kw{L}, \eta, \mu)$, which freely adjoins a least element to a predomain. There is a special domain $\Sigma \cong \lift{1} \hookrightarrow \Omega$ spanned by propositions called the \emph{Sierpi≈Ñski space} or \emph{dominance}; propositions in $\Sigma$ should be thought of as domains of definition of partial maps, and a map $X \to \Sigma$ can be thought of as a ``computational'' or ``observable'' subset of a predomain $X$. Moreover, because we use the \emph{sealing modality} (see \cref{subsubsec:phase-distinction}) associated the the phase proposition $\P$ to define the denotational cost semantics of \pcf{}, we require that predomains are closed under the sealing modality. Lastly, we assume that the subuniverse $\mathcal{U}_\kw{predom}$ is closed under lifting. 



\subsection{Denotational semantics of cost-sensitive \pcf{}}\label{subsec:den-sem}

We aim to prove the computational adequacy property for a cost-sensitive version of \pcf{} called \pcfc{} in which cost and partiality are treated as a single \emph{call-by-push-value effect}. We spell out the details of the language in \cref{sec:pcfc}, but the basic idea is to separate pure values and effectful computations at both the term and type level, resulting in a class of value types $A$ and a class of computation types $X$. The type structure of the language is generated by a pair of type operators $\kw{F}, \kw{U}$ in which $\kw{F}(A)$ represents the partial cost-aware computations of type $A$ and $\kw{U}(X)$ represents the value type whose underlying set of points are computations of type $X$. In contrast to call-by-value languages, call-by-push-value function types are \emph{computations} and take the form $A \to X$. As an example, the ordinary call-by-value \pcf{} function type $\kw{nat} \to \kw{nat}$ corresponds to the type $\kw{U}(\kw{nat} \to \kw{F}(\kw{nat}))$ in the call-by-push-value setting --- here the codomain type $\kw{F}(\kw{nat})$ records both the cost incurred and the possibility of divergence, and the outer $\kw{U}(-)$ corresponds to the fact that functions are values in a call-by-value setting. 

The denotational semantics of \pcfc{} is based on the adjunction models of call-by-push-value~\cite{levy:2003:book} in which $\sem{\kw{F}(A)}$ is defined to be the lift of $\mathbb{C} \times \sem{A}$ for a \emph{purely intensional} cost monoid $\mathbb{C}$ in the sense of \cref{subsubsec:phase-distinction}. By using a purely intensional type for the cost semantics, we may prove a cost-sensitive computational adequacy theorem that can be restricted to an extensional adequacy result for \pcf{}. Moreover, by interpreting the cost this way, the resulting denotational cost semantics evinces a form of \emph{information flow security} when viewing cost and behavior as security levels:

\begin{proposition}
  For any purely extensional type $B$, every map $f : \mathbb{C} \to \lift{B}$ is \emph{weakly constant} in the sense that for any inputs $x, y : \mathbb{C}$, we have that $f~x$ and $f~y$ are equal whenever they are both defined. 
\end{proposition} 

As an application of computational adequacy, we can immediately transfer this intrinsic denotational security property to functions of \pcfc{}. 
